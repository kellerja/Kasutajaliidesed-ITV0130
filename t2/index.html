<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <script src="scripts/vue.js"></script>
    <title>Document</title>
</head>
<body>
    <div id="game" class="container">
        <div v-if="!game.isGameOver">
            <div class="hp-container">
                <h1>Wanted level:</h1>
                <div class="health-bar-filled" v-for="_ in Math.max(game.player.maxLives - game.player.lives, 0)"></div>
                <div class="health-bar-outline" v-for="_ in Math.max(game.player.lives, 0)"></div>
                <h1 style="margin-left: 20px">Haul value: {{ game.player.score }} €</h1>
            </div>
            <div class="d-flex flex-wrap">
                <div class="tab-n1">
                    <h2>Quick, grab all that is valuable!</h2><h2>Discard the rest!</h2>
                    <div class="basket-container">
                        <bin v-for="bin in game.bins" :key="bin.id" :bin="bin"></bin>
                    </div>
                    
                    <div :class="['paper-container', {'disabled': !!game.extraTask}]">
                        <svg class="alert-line" viewBox="0 0 100 10">
                            <g v-for="(_, i) in 6">
                                <polygon :points="(i * 20) + ',0 ' + (i * 20) + ',1 ' + (i * 20 + 4) + ',5 ' + ((i * 20) + 5) + ',5'" style="fill:red;stroke-width:0"/>
                                <polygon :points="(i * 20) + ',10 ' + (i * 20) + ',9 ' + (i * 20 + 4) + ',5 ' + ((i * 20) + 5) + ',5'" style="fill:blue;stroke-width:0"/>
                            </g>
<!--                            <line v-for="(_, i) in 6" :x1="(-5 + (100 / 5) * i) + '%'" y1="0" :x2="(0 + (100 / 5) * i) + '%'" y2="50%" style="stroke:rgb(255,0,0);stroke-width:0.5rem;"/>
                            <line v-for="(_, i) in 6" :x1="(-5 + (100 / 5) * i) + '%'" y1="100%" :x2="(0 + (100 / 5) * i) + '%'" y2="50%" style="stroke:rgb(0,0,255);stroke-width:0.5rem;"/>
                            <g>
                                <svg v-for="(_, i) in 6" viewBox="0 0 2 2" height="40%" width="20%" :x="(-8 + (100 / 5) * i) + '%'" y="30%">
                                    <polygon points="0,0 0,1 1,1" style="fill:red;stroke-width:0"/>
                                    <polygon points="0,1 0,2 1,1" style="fill:blue;stroke-width:0"/>
                                </svg>
                            </g>-->
                        </svg>
                        <h1>Loot:</h1>
                        <draggable-task-component :key="'task_' + task.id" :id="'task_' + task.id" 
                            v-for="task in game.tasks" :task="task" :disabled="!!game.extraTask" :game-over="game.gameOver"></draggable-task-component>
                    </div>
                </div>
                <div v-if="game.extraTask" class="tab-n2">
                    <h1>Disable the alarm!</h1>
                    <calculate-task-component :key="'task_' + game.extraTask.id" :id="'task_' + game.extraTask.id" 
                        :task="game.extraTask" :game-over="game.gameOver"></calculate-task-component>
                </div>
            </div>
        </div>
        <div class="mt-4" v-else>
            <h1>You have been busted!</h1>
            <h3>Final haul value: {{ game.player.score }} €</h3>
            <button @click="game.restart()" class="btn">Restart</button>
        </div>
    </div>
    <script src="scripts/main.js"></script>
</body>
</html>
